(function(ns,datans){function Param(){}function Tracker(options){this.opt=options||{},this._params={};var VersionParam=Param.extend({name:"v",val:this.v});this.reg(VersionParam),this.reg.apply(this,this.params)}var px={},wnd=this,ctor=function(){},extend=function(Parent){return function(proto){var child=function(){Parent.apply(this,arguments)};ctor.prototype=Parent.prototype,child.prototype=new ctor,child.prototype.constructor=child;for(var prop in proto)proto.hasOwnProperty(prop)&&(child.prototype[prop]=proto[prop]);return child}};Param.prototype={name:null,_esc:this.encodeURIComponent||escape,_doc:this.document,_nav:this.navigator,_slf:this.self,_top:this.top,_metaTags:function(){return this._mtags||(this._mtags=this._doc.getElementsByTagName("meta"))},_ifr:function(){return this._slf!=this._top},val:function(){},_val:function(){return typeof this.val=="function"?this.val():this.val},qs:function(){var val=this._val();return typeof val!="string"?0:this.name+"="+this._esc(val)}},Param.extend=extend(Param),px.Param=Param,px.IframeParam=px.Param.extend({name:"ifr",val:function(){return this._ifr()?"1":"0"}}),px.ContentLangParam=px.Param.extend({name:"clang",_htmlLang:function(){var el=this._doc.getElementsByTagName("html")[0],r="";return el&&el.lang&&(r=el.lang),r},_metaLang:function(){var el,equiv,r="",i,metaTags=this._metaTags(),len=metaTags.length;for(i=0;i<len;i++){el=metaTags[i],equiv=el.httpEquiv;if(equiv&&equiv.toLowerCase()==="content-language"){r=el.content||"";break}}return r},val:function(){return this._metaLang()||this._htmlLang()}}),px.BrowserLangParam=px.Param.extend({name:"lang",val:function(){var nav=this._nav;return(nav&&nav.language?nav.language:nav&&nav.browserLanguage?nav.browserLanguage:"-").toLowerCase()}}),px.ForcedSegmentsParam=px.Param.extend({name:"seg",val:function(){if(wnd[datans])return wnd[datans].segments}}),px.MetaKeywordsParam=px.Param.extend({name:"k",val:function(){var el,ret={},i,metaTags=this._metaTags(),len=metaTags.length;for(i=0;i<len;i++){el=metaTags[i];if(el.name&&el.name.toLowerCase()=="keywords")return el.content||""}return""}}),px.ReferrerParam=px.Param.extend({name:"ref",val:function(){return this._ifr()?this._doc.referrer:"0"}}),px.TimestampParam=px.Param.extend({name:"rid",val:function(){return(new Date).getTime().toString()}}),Tracker.prototype={constructor:Tracker,v:"2.0",ep:"http://pixer.meaningtool.com/",params:[px.IframeParam,px.ContentLangParam,px.BrowserLangParam,px.MetaKeywordsParam,px.ReferrerParam,px.ForcedSegmentsParam,px.TimestampParam],url:function(){return this.ep+this.opt.client+"/0/"+this.opt.action},req:function(){var url=this.url()+"?"+this.qs();this._req(url),this._done=1},_req:function(url){var im=new wnd.Image(1,1);im.onload=function(){},im.src=url},done:function(){return!!this._done},qs:function(){var mods=this._params,mod,val,qs=[];for(var modName in mods)mods.hasOwnProperty(modName)&&(mod=mods[modName],val=mod.qs(),val&&qs.push(val));return qs.join("&")},reg:function(ParamClass){var len=arguments.length,i=0;if(len>1){for(;i<len;i++)this.reg(arguments[i]);return}var param=new ParamClass(this);this._params[param.name]=param}},Tracker.extend=extend(Tracker),px.Tracker=Tracker,typeof this[ns]=="undefined"?(this[ns]={},px.manager={trackers:{},getTracker:function(options){var key=this.key(options),tracker=this.trackers[key];return!tracker&&this.isProcesable(options)&&(tracker=new px.Tracker(options),this.trackers[key]=tracker),tracker},run:function(trackerOptions){var tracker=this.getTracker(trackerOptions);tracker&&!tracker.done()&&tracker.req()},key:function(trackerOptions){return trackerOptions.client+trackerOptions.action},isProcesable:function(data){return typeof data=="object"&&!!data.client&&!!data.action},reset:function(){this.trackers={}}},this[ns].manager=px.manager):px.manager=this[ns].manager,px.run=function(){px.manager.run(this[datans])},px.run()}).call(this,"_mt_","_mtdata_");